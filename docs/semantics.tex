%!TEX root=./robocert.tex

\newcommand{\tockcsp}{\emph{tock}-CSP}
\newcommand{\cspm}{CSP\(_\text{M}\)}

\newcommand{\defeq}{\mathbin{\overset{\text{def}}=}}
% CSP operators
\newcommand{\interrupt}{\mathbin{\triangle}}
\newcommand{\cspnsop}{\mathbin{\!:\!:\!}}
% CSP keywords/processes
\newcommand{\cspkw}[1]{\operatorname{\mathbf{#1}}}
\newcommand{\runproc}[1]{\cspkw{Run}\left(#1\right)}
\newcommand{\events}{\cspkw{Events}}

%
% Metasyntactic variables
%
\newcommand{\anarrow}{a}
\newcommand{\anevent}{e}
\newcommand{\agap}{g}
\newcommand{\amspec}{m}
\newcommand{\amsgset}{M}
\newcommand{\aloop}{l}
\newcommand{\anop}{o}
\newcommand{\aseq}{\sigma}
\newcommand{\asseq}{q}
\newcommand{\astep}{s}
\newcommand{\atarget}{t}
\newcommand{\aworld}{w}
\newcommand{\anaction}{x}
% Assertions
\newcommand{\asasst}{\alpha_s}
\newcommand{\amodel}{\mathcal{M}}

\newcommand{\sema}[1]{\llbracket #1 \rrbracket}
\newcommand{\stepsema}[1]{\sema{#1}^{\mathsf{step}}}
\newcommand{\gapsema}[2]{\sema{#1}^{\mathsf{gap}}_{(#2)}}
\newcommand{\actsema}[1]{\sema{#1}^{\mathsf{act}}}
\newcommand{\mspecsema}[1]{\sema{#1}^{\mathsf{mspec}}}
\newcommand{\loopsema}[1]{\sema{#1}^{\mathsf{loop}}}
\newcommand{\msgsetsema}[1]{\sema{#1}^{\mathsf{mset}}}
\newcommand{\seqsema}[1]{\sema{#1}^{\mathsf{seq}}}
\newcommand{\sseqsema}[1]{\sema{#1}^{\mathsf{sseq}}}
\newcommand{\asstsema}[1]{\sema{#1}^{\mathsf{sasst}}}

\newcommand{\funcname}[1]{\mathsf{#1}}
\newcommand{\eventsof}[1]{\funcname{events}(#1)}
\newcommand{\seqnameOf}[1]{\funcname{seqName}(#1)}

\newcommand{\field}[2]{#1.\funcname{#2}}

This chapter formally captures the semantics of \langname{} in terms of its
target languages:

\begin{itemize}
\item
	\tockcsp~(\cref{sec:semantics-tockcsp});
\item
	\todo{PRISM};
\item
	\todo{Isabelle/UTP?}.
\end{itemize}

\section{How to read this section}

\begin{table}
	\centering

	\begin{tabular}{rl}
	\toprule
	\thead{Variable} & \thead{Meaning}
	\\
	\midrule
	\multicolumn{2}{l}{\tsubhead{Sequences}}
	\\
	\(\aseq\) & \msequence
	\\
	\(\asseq\) & \msubsequence
	\\
	\(\astep\) & \msequencestep
	\\
	\(\agap\) & \msequencegap
	\\
	\midrule
	\multicolumn{2}{l}{\tsubhead{Actions (\cref{sec:metamodel-actions})}}
	\\
	\(\anaction\) & \msequenceaction
	\\
	\(\anarrow\) & \marrowaction
	\\
	\(\aloop\) & \mloopaction
	\\
	\(\bot\) & \mfinalaction
	\\
	\midrule
	\multicolumn{2}{l}{\tsubhead{Messages (\cref{sec:metamodel-messages})}}
	\\
	\(\amspec\) & \mmessagespec
	\\
	\(\universe\) & \muniversegapmessageset
	\\
	\(\amsgset\) & \mextensionalgapmessageset
	\\
	\midrule
	\multicolumn{2}{l}{\tsubhead{Actors}}
	\\
	\(\atarget\) & \mtarget
	\\
	\(\aworld\) & \mworld
	\\
	\midrule
	\multicolumn{2}{l}{\tsubhead{Assertions}}
	\\
	\(\asasst\) & \msequenceassertion
	\\
	\(\amodel\) & \mcspmodel
	\\
	\bottomrule
	\end{tabular}

	\caption{Metasyntactic variables.}
	\label{tab:metasyntactic-variables}
\end{table}

The semantics treatments in this section take the form of rewrite rules from
the abstract syntax in \cref{cha:metamodel} to the target notation.  Variables
in the abstract syntax have an implicit type in the metamodel corresponding to
one of the metasyntactic variables in \cref{tab:metasyntactic-variables}.

We also use the following notational conventions \todo{may need tweaking}:

\begin{itemize}
\item
	\(\sema{-}_{\mathsf{name}}\) denotes a main semantic rule;
\item
	\(\funcname{name}()\) denotes auxiliary semantic functions;
\item
	\(\field{x}{name}\) denotes a field of the metamodel object \(x\);
\item
	\(\text{Roman typeface}\) typically denotes a construct from the target
	notation.
\end{itemize}

\section{\tockcsp{} semantics}\label{sec:semantics-tockcsp}
\input{semantics/tockcsp}
