%!TEX root=../../robocert.tex

This section reviews known formal semantic treatments for any notations
mentioned earlier as similar to those in \langname, and compares them to
our approaches.

\subsection{Sequences}\label{sec:semantics-comparison-review-seq}

This section reviews formal semantics development efforts for sequence diagram
notations.
These developments often
target automata, especially B\"uchi automata; this
is reflective of a relationship between sequence diagrams
and linear temporal logic.
Other approaches include:

\begin{itemize}
  \item trace semantics (as per the UML standard);
  \item variations of Petri nets;
  \item some characterisation of partial orders, such as posets;
  \item reduction to some intermediate form (such as process algebras or other
    sequence notations) to use the semantics of that form.  To target B\"uchi
    automata, one might use fragments of LTL.
\end{itemize}

\paragraph{Micskei--Waeselynck survey of UML2}

The standard semantics for UML2 sequence diagrams (see
\cite[\S 17.2.3.1]{uml251}) is a pair of \emph{positive} and \emph{negative}
traces, with an implicit notion of inconclusive traces belonging to
the universe but not to either set.  Deriving these sets involves the
fulfilment of partial orders over messages.

As UML2 expresses this
semantics in ambiguous natural language, and as the trace-pair
semantics is not always compatible with the diverse use cases of sequence
diagrams, there are several projects to provide an alternative formal semantics.

In 2011, \textcite{Micskei11-UMLSeqSemaSurvey} surveyed
the formal semantics for UML sequence diagrams available at the time.  These
efforts involve developments of the double-trace-set approach as well as other
denotational and operational semantics.

This study is useful here for two reasons.  First, it captures the then-state of
the art in UML sequence diagram formalisation.  Later on in this section,
we compare against some of the identified treatments (for instance,
\emph{STAIRS}).

Second, it provides a detailed
set of points (with thought experiments) where the formalisms diverge both from
each other and from UML.
This comparison shows that different use cases, interpretations, and backgrounds
have given rise to many different semantics for UML sequence diagrams, some
of which differ significantly from the standard.

\paragraph{Lima et al. CML semantics of SysML (2014)}

Our \tockcsp{} semantics (\cref{sec:semantics-tockcsp-seq}) takes heavy inspiration
from that of \textcite{lima-semantics} on the SysML profile of UML, with
some differences to account for a retargeting from CML to \tockcsp.  This
semantics postdates the survey above.

For two-\mactor{} sequences \ghtodo{32}{all of them at the moment}, we can (and do)
simplify the semantics significantly.  We also diverge in other ways:

\begin{itemize}
\item we focus on \tockcsp{} rather than CML, and so have a
  treatment of timing properties based on the former;
\item
  we consider concepts that exist in \langname{} but not UML sequence
  diagrams, and omit the converse
  (see \cref{sec:seq-comparison-features});
\item
  we delegate to the \robostar{} CSP semantics for concepts such as events and
  operations, which allows the direct refinement analysis of \robostar{} models
  using sequences.
\end{itemize}

The main novelty of our work here is that, by targeting \tockcsp, we can capture
timing properties and refinement relations.

\paragraph{Jacobs and Simpson CSP semantics (2015)}

Another semantics~\cite{Jacobs15-SeqCSP}, developed at a similar time to
the above, defines SysML sequence diagrams in CSP.
Though the goals resemble as those of Lima et al.,
and the points on novelty and differences compared to \langname{} considered
above broadly apply here, the approach differs in several ways:

\begin{itemize}
\item
  Jacobs and Simpson place each message into a
  separate send-receive process; lifeline processes enumerate their
  sides of the message in order and rely on
  synchronisation with the message processes.
  Lima et al. do not
  distinguish between sends and receives, with
  cross-lifeline synchronisation pairing the opposite
  ends of each message.
\item
  Jacobs and Simpson appear to expand diagrams into CSP by
  considering diagram \emph{fragments} first, with each semantic rule
  then enumerating the lifelines and messages to which the fragment applies;
  Lima et al. consider \emph{lifelines} first, handling each fragment
  separately per lifeline and using control channels to synchronise the
  lifelines' contributions to the fragment.
\item
  Further, Jacobs and Simpson translate many UML operators by adding watchdog
  processes in parallel with ordinary sequential composition.
\item
  Lima et al. use control channels embedded into sequential compositions to
  encode break fragments;
  Jacobs and Simpson use an elaborate encoding taking the pre-- and
  post-fragments to execute either side of the break.
\end{itemize}

To simplify the generated CSP code, our semantics more closely resembles that of
Lima et al. than that of Jacobs and Simpson.
\todo{For now, but I suspect when we get to
multi-actor sequences, we'll pick whichever semantic elaboration gives a better
textual notation.}

\paragraph{Li and Li CSP semantics (2010)}

A third semantics~\cite{Li10-SeqCSP} captures UML in CSP in a similar
way to Jacobs and Simpson.  This semantics appears to be an ancestor of both
of the approaches above, and captures only a small fragment of UML (for
instance, the `alt', `loop', `break', and `opt' combined fragments only).
This semantics backs a model-to-model
transformation from an XML representation of sequence diagrams to CSP.

\paragraph{Translation of SysML to HMSC}

\textcite{Busard21-SDviaHMSC} consider the translation of SysML diagrams to high-level message sequence
charts through model-to-model transformation.  This enables
the use of existing hMSC semantics, such as translations to
automata.  Their setup specifically uses the NuSMV model
checker to perform the transformation into automata it can
model-check, verify, and emit counter-examples.

The main goal of this exercise is to facilitate a round-trip
verification system using the Capella modelling toolkit as a
high-level, user-facing interface; a notion similar to translating results
back to Capella may be useful in \langname.  Further, the case study explored is
in the field of unmanned aerial vehicles.
However, in this setup, the
sequence diagrams are the \emph{subjects} of verification (by LTL properties)
and not the means of verification.

\paragraph{MARTE}

We are aware of two efforts to provide semantics for aspects of MARTE:

\begin{itemize}
  \item
    a treatment of sequence diagrams using a discrete-timed extension of
    the \(\pi\)-calculus~\cite{Jin11-MARTEPiCalculus}; \todo{I'm not sure if
    this is actually MARTE-specific; it seems to be tracking only discrete
    time observations, which seem to be in UML 2.5}
  \item 
    a treatment of the MARTE \emph{Clock Constraint Specification Language} (in
    isolation, not attached to sequence diagrams) using time Petri
    nets~\cite{Mallet09-MARTEClockNets} and the \emph{Signal} language.
\end{itemize}

\paragraph{Trace semantics of STAIRS}

STAIRS~\cite{Haugen03-STAIRS} gives a trace semantics for UML2 in terms
of pairs of positive and negative trace sets (the latter capturing the UML2
\texttt{neg} operator).  These traces contain
transmission and consumption events across signals.  STAIRS defines
refinement operators that are sensitive to the possibility that positive
traces can be recategorised as negative traces after refinement.

Timed
STAIRS~\cite{Haugen05-TimedSTAIRS} traces also contain separate reception
events (capturing the distinction between the time an event reaches
its destination and the time it is processed), and \(\mathbb R\)-valued
timestamps capturing timing.  We instead use the discrete \tockcsp{} notion
of time, and do not directly cater for the reception--consumption distinction
\todo{would CSP hiding and renaming account for this?}.

Our work indirectly provides a similar semantics for \langname{}
sequences through \tockcsp{} (and its traces and \emph{tick-tock} models~\cite{Baxter21-TickTock}).
Our approach achieves automation through existing tools such as FDR,
and is compatible with the existing \robostar{} ecosystem as well as that of
\tockcsp.

\paragraph{MSC and HMSC}

\textcite{Kim06-THMSC} give a semantics for timed high-level message
sequence charts in terms of timed lposets (labelled partially ordered
sets).  Their paper also characterises other forms of semantics
available for forms of MSC: process algebra, automata, partial order,
and Petri nets.  While the process-algebra approach~\cite{Mauw99-MSCOpSem} is similar in
style to our \tockcsp{} semantics, it seems to target a bespoke
algebra (to achieve an operational semantics, rather than a notion of
refinement).

\paragraph{LSC}

The introductory paper for Live Sequence Charts~\cite{lsc} gives a
semantics in terms of skeleton automata, with \textcite{Brill04-LSCintro}
proposing the use of timed B\"uchi automata.
The semantics for modal sequence diagrams~\cite{Harel08-ModalSD}, the
UML profile adapting aspects of LSC as modalities, is also in terms of
automata, in this case being
non-deterministic B\"uchi automata.

\paragraph{PSC and derivatives}

Property Sequence Chart (and its derivatives) is a layer atop linear
temporal logic, which means that its operational semantics is in the
form of B\"uchi automata.\footnote{ Micskei and Waeselynck also note
  that several semantic treatments for UML2 also target B\"uchi
  automata.}  
A denotational semantics in terms of invalid traces also exists.

For TPSC, the target is timed B\"uchi automata; this also
seems to be the target for PTPSC, with statistical hypothesis testing
proposed to cover the additions~\cite{ptpsc}.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../../robocert"
%%% End:
